Room е библиотека, въведена от Google, която действа като абстракционен слой над SQLite и улеснява заявките към базата данни.

Защо да използвате Room?

Прави проверка за компилиране по времето на SQL заявките. По този начин предотвратява сривовете по време на изпълнение.

Намалява кода на котлона. Вместо да използваме SQLiteHelper и да пишем продължителни заявки, можем да използваме пояснения, за да свършим работата за нас.

структурата на Room библиотеката:

![Roomstructure](/images/img.png)

 

Обикновено Room се състои от следните три основни компонента:

•	Entity: Това е моделен клас, в който дефинираме свойствата, които действат като полета на колони. 

•	Database : Това е абстрактен клас, който трябва да разшири RoomDatabase. Ние трябва да настроим Entity тук. Също така, ние трябва да актуализираме номера на версията всеки път, когато променяме схемата.

•	Dao: Data Access Object. Това е интерфейсът, в който задаваме нашите SQL заявки. @Insert, @Query, @Update @Delete. @Insert не може да върне инт. @Update и @Delete могат да върнат един int, който представлява броя на променените / изтритите редове.

 


Приложение се състои от вмъкване, актуализиране, изтриване на todos.




•	myDatabase = Room.databaseBuilder(getApplicationContext(), MyDatabase.class, MyDatabase.DB_NAME).fallbackToDestructiveMigration().build(); се използва за инициализиране на базата данни.

•	fallbackToDestructiveMigration() осигурява безпроблемна миграция през версия на базата данни, без да се срива.

•	Проверяваме дали приложението се стартира за първи път или не използва споделени предпочитания.

•	Създаваме dummy ArrayList, за да попълним нашия RecyclerView.

•	За изпълнение на заявки трябва да използваме асинхронни задачи. Така че използваме AsyncTask


•	Имаме следните операции в нашето приложение:
1.	Актуализиране на елемент от todo от списъка.
2.	Добавяне на нов елемент на todo към списъка.
И за двата случая използваме startActivityForResult, за да върнем данните от следващата дейност и съответно актуализираме RecyclerView.
•	Използва се спинър за филтриране на RecyclerView въз основа на категория, за която заявяваме база данни.

•	setResult(RESULT_OK, intent); се използва за връщане на резултата към MainActivity. Ние или предаваме идентификатора на новата задача на todo или броя редове изтрити / актуализирани и RecyclerView се актуализира съответно.
